[2025-07-30 09:22:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:22:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:22:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:22:04 DBG] Created DbCommand for 'ExecuteReader' (197ms).
[2025-07-30 09:22:04 DBG] Created DbCommand for 'ExecuteReader' (197ms).
[2025-07-30 09:22:04 DBG] Created DbCommand for 'ExecuteReader' (197ms).
[2025-07-30 09:22:04 DBG] Initialized DbCommand for 'ExecuteReader' (207ms).
[2025-07-30 09:22:04 DBG] Initialized DbCommand for 'ExecuteReader' (206ms).
[2025-07-30 09:22:04 DBG] Initialized DbCommand for 'ExecuteReader' (208ms).
[2025-07-30 09:22:04 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 09:22:04 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 09:22:04 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 09:22:04 INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 09:22:04 INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 09:22:04 INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 09:22:05 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:22:05 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:22:05 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:22:05 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 61ms reading results.
[2025-07-30 09:22:05 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 62ms reading results.
[2025-07-30 09:22:05 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 62ms reading results.
[2025-07-30 09:22:05 INF] HTTP GET /api/Supplier/list responded 200 in 1544.2084 ms
[2025-07-30 09:22:05 INF] HTTP GET /api/Category/list responded 200 in 1546.7650 ms
[2025-07-30 09:22:05 INF] HTTP GET /api/Product/list responded 200 in 1554.4698 ms
[2025-07-30 09:22:08 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:22:08 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 09:22:08 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 09:22:08 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 09:22:08 INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 09:22:08 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:22:08 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 3ms reading results.
[2025-07-30 09:22:08 INF] HTTP GET /api/Product/1 responded 200 in 111.8940 ms
[2025-07-30 09:33:38 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:33:38 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 09:33:38 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 09:33:38 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:33:38 INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:33:38 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:33:38 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 36ms reading results.
[2025-07-30 09:33:38 INF] HTTP GET /api/Order/list responded 200 in 125.2869 ms
[2025-07-30 09:33:43 INF] HTTP OPTIONS /api/Order/10248 responded 204 in 1.2973 ms
[2025-07-30 09:33:43 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:33:43 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 09:33:43 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 09:33:43 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
WHERE [o].[OrderID] = @__p_0
[2025-07-30 09:33:43 INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
WHERE [o].[OrderID] = @__p_0
[2025-07-30 09:33:43 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:33:43 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 09:33:43 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:33:43 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 09:33:43 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 09:33:43 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Orders]
OUTPUT 1
WHERE [OrderID] = @p0;
[2025-07-30 09:33:43 INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Orders]
OUTPUT 1
WHERE [OrderID] = @p0;
[2025-07-30 09:33:43 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:33:43 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 10ms reading results.
[2025-07-30 09:33:43 ERR] An exception occurred in the database while saving changes for context type 'NorthwindApp.Data.Context.NorthwindContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Order_Details_Orders". The conflict occurred in database "Northwind", table "dbo.OrderDetails", column 'OrderID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:49897d67-e0ef-4eeb-9eea-8995d09cdfb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Order_Details_Orders". The conflict occurred in database "Northwind", table "dbo.OrderDetails", column 'OrderID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:49897d67-e0ef-4eeb-9eea-8995d09cdfb2
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-07-30 09:37:58 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:37:58 DBG] Created DbCommand for 'ExecuteReader' (78ms).
[2025-07-30 09:37:58 DBG] Initialized DbCommand for 'ExecuteReader' (86ms).
[2025-07-30 09:37:58 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:37:58 INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:37:58 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:37:58 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 72ms reading results.
[2025-07-30 09:37:58 INF] HTTP GET /api/Order/list responded 200 in 1236.4010 ms
[2025-07-30 09:39:00 INF] HTTP GET /api/Order/list responded 200 in 105.7884 ms
[2025-07-30 09:39:01 INF] HTTP GET /api/Order/list responded 200 in 5.6833 ms
[2025-07-30 09:39:30 INF] HTTP GET /api/Order/list responded 200 in 40.1716 ms
[2025-07-30 09:40:35 INF] HTTP GET /api/Order/list responded 200 in 122.2384 ms
[2025-07-30 09:40:38 INF] HTTP OPTIONS /api/Order/undefined responded 204 in 0.7555 ms
[2025-07-30 09:40:38 INF] HTTP DELETE /api/Order/undefined responded 400 in 28.9227 ms
[2025-07-30 09:40:40 INF] HTTP DELETE /api/Order/undefined responded 400 in 1.8475 ms
[2025-07-30 09:40:41 INF] HTTP DELETE /api/Order/undefined responded 400 in 1.1327 ms
[2025-07-30 09:40:41 INF] HTTP DELETE /api/Order/undefined responded 400 in 1.0019 ms
[2025-07-30 09:40:42 INF] HTTP DELETE /api/Order/undefined responded 400 in 1.2702 ms
[2025-07-30 09:45:07 INF] HTTP GET /api/Order/list responded 200 in 62.7762 ms
[2025-07-30 09:45:11 INF] HTTP GET /api/Order/list responded 200 in 1.5588 ms
[2025-07-30 09:45:14 INF] HTTP OPTIONS /api/Order/10248 responded 204 in 0.1910 ms
[2025-07-30 09:45:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:45:14 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 09:45:14 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 09:45:14 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
WHERE [o].[OrderID] = @__p_0
[2025-07-30 09:45:14 INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
WHERE [o].[OrderID] = @__p_0
[2025-07-30 09:45:14 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:45:14 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 3ms reading results.
[2025-07-30 09:45:14 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:45:14 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 09:45:14 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 09:45:14 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Orders]
OUTPUT 1
WHERE [OrderID] = @p0;
[2025-07-30 09:45:14 INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Orders]
OUTPUT 1
WHERE [OrderID] = @p0;
[2025-07-30 09:45:14 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:45:14 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 7ms reading results.
[2025-07-30 09:45:14 ERR] An exception occurred in the database while saving changes for context type 'NorthwindApp.Data.Context.NorthwindContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Order_Details_Orders". The conflict occurred in database "Northwind", table "dbo.OrderDetails", column 'OrderID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:160d6eea-0a51-4f2a-84f4-115b8852f1c5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Order_Details_Orders". The conflict occurred in database "Northwind", table "dbo.OrderDetails", column 'OrderID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:160d6eea-0a51-4f2a-84f4-115b8852f1c5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-07-30 09:55:04 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:55:05 DBG] Created DbCommand for 'ExecuteReader' (59ms).
[2025-07-30 09:55:05 DBG] Initialized DbCommand for 'ExecuteReader' (66ms).
[2025-07-30 09:55:05 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:55:05 INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:55:05 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:55:05 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 73ms reading results.
[2025-07-30 09:55:05 INF] HTTP GET /api/Order/list responded 200 in 1222.0970 ms
[2025-07-30 09:55:08 INF] HTTP OPTIONS /api/Order/10249 responded 204 in 1.5660 ms
[2025-07-30 09:55:08 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:55:08 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 09:55:08 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 09:55:08 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
WHERE [o].[OrderID] = @__p_0
[2025-07-30 09:55:08 INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
WHERE [o].[OrderID] = @__p_0
[2025-07-30 09:55:08 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:55:08 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 3ms reading results.
[2025-07-30 09:55:08 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:55:08 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 09:55:08 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 09:55:08 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Orders]
OUTPUT 1
WHERE [OrderID] = @p0;
[2025-07-30 09:55:08 INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Orders]
OUTPUT 1
WHERE [OrderID] = @p0;
[2025-07-30 09:55:08 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:55:08 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 5ms reading results.
[2025-07-30 09:55:08 INF] HTTP DELETE /api/Order/10249 responded 204 in 279.1527 ms
[2025-07-30 09:55:08 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:55:08 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 09:55:08 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 09:55:08 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:55:08 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:55:08 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:55:08 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 13ms reading results.
[2025-07-30 09:55:08 INF] HTTP GET /api/Order/list responded 200 in 74.2728 ms
[2025-07-30 09:56:17 INF] HTTP OPTIONS /api/Order responded 204 in 38.2320 ms
[2025-07-30 09:56:17 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:56:17 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 09:56:17 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 09:56:17 DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerID], [EmployeeID], [Freight], [OrderDate], [RequiredDate], [ShipAddress], [ShipCity], [ShipCountry], [ShipName], [ShipPostalCode], [ShipRegion], [ShipVia], [ShippedDate])
OUTPUT INSERTED.[OrderID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
[2025-07-30 09:56:17 INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerID], [EmployeeID], [Freight], [OrderDate], [RequiredDate], [ShipAddress], [ShipCity], [ShipCountry], [ShipName], [ShipPostalCode], [ShipRegion], [ShipVia], [ShippedDate])
OUTPUT INSERTED.[OrderID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
[2025-07-30 09:56:17 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:56:17 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 7ms reading results.
[2025-07-30 09:56:17 ERR] An exception occurred in the database while saving changes for context type 'NorthwindApp.Data.Context.NorthwindContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Customers". The conflict occurred in database "Northwind", table "dbo.Customers", column 'CustomerID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e25a8280-0fe9-4636-bd52-46b760fd92a4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Customers". The conflict occurred in database "Northwind", table "dbo.Customers", column 'CustomerID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e25a8280-0fe9-4636-bd52-46b760fd92a4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-07-30 09:58:58 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:58:58 DBG] Created DbCommand for 'ExecuteReader' (74ms).
[2025-07-30 09:58:58 DBG] Initialized DbCommand for 'ExecuteReader' (82ms).
[2025-07-30 09:58:58 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:58:58 INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:58:58 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:58:58 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 81ms reading results.
[2025-07-30 09:58:58 INF] HTTP GET /api/Order/list responded 200 in 1295.2788 ms
[2025-07-30 09:59:10 INF] HTTP OPTIONS /api/Order responded 204 in 1.5259 ms
[2025-07-30 09:59:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:59:10 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 09:59:10 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-07-30 09:59:10 DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerID], [EmployeeID], [Freight], [OrderDate], [RequiredDate], [ShipAddress], [ShipCity], [ShipCountry], [ShipName], [ShipPostalCode], [ShipRegion], [ShipVia], [ShippedDate])
OUTPUT INSERTED.[OrderID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
[2025-07-30 09:59:10 INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Orders] ([CustomerID], [EmployeeID], [Freight], [OrderDate], [RequiredDate], [ShipAddress], [ShipCity], [ShipCountry], [ShipName], [ShipPostalCode], [ShipRegion], [ShipVia], [ShippedDate])
OUTPUT INSERTED.[OrderID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
[2025-07-30 09:59:10 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:59:10 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 14ms reading results.
[2025-07-30 09:59:10 INF] HTTP POST /api/Order responded 201 in 280.4966 ms
[2025-07-30 09:59:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 09:59:10 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 09:59:10 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 09:59:10 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:59:10 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 09:59:11 ERR] An exception occurred while iterating over the results of a query for context type 'NorthwindApp.Data.Context.NorthwindContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method26(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method26(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-07-30 09:59:11 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 09:59:11 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 55ms reading results.
[2025-07-30 10:05:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:05:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:05:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:05:45 DBG] Created DbCommand for 'ExecuteReader' (102ms).
[2025-07-30 10:05:45 DBG] Created DbCommand for 'ExecuteReader' (102ms).
[2025-07-30 10:05:45 DBG] Created DbCommand for 'ExecuteReader' (102ms).
[2025-07-30 10:05:45 DBG] Initialized DbCommand for 'ExecuteReader' (111ms).
[2025-07-30 10:05:45 DBG] Initialized DbCommand for 'ExecuteReader' (111ms).
[2025-07-30 10:05:45 DBG] Initialized DbCommand for 'ExecuteReader' (112ms).
[2025-07-30 10:05:45 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 10:05:45 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CustomerID], [c].[Address], [c].[City], [c].[CompanyName], [c].[ContactName], [c].[ContactTitle], [c].[Country], [c].[Fax], [c].[Phone], [c].[PostalCode], [c].[Region]
FROM [Customers] AS [c]
[2025-07-30 10:05:45 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EmployeeId], [e].[BirthDate], [e].[City], [e].[Country], [e].[FirstName], [e].[LastName], [e].[Title]
FROM [Employees] AS [e]
[2025-07-30 10:05:45 INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EmployeeId], [e].[BirthDate], [e].[City], [e].[Country], [e].[FirstName], [e].[LastName], [e].[Title]
FROM [Employees] AS [e]
[2025-07-30 10:05:45 INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CustomerID], [c].[Address], [c].[City], [c].[CompanyName], [c].[ContactName], [c].[ContactTitle], [c].[Country], [c].[Fax], [c].[Phone], [c].[PostalCode], [c].[Region]
FROM [Customers] AS [c]
[2025-07-30 10:05:45 INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 10:05:45 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:05:45 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:05:45 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 56ms reading results.
[2025-07-30 10:05:45 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 56ms reading results.
[2025-07-30 10:05:45 ERR] An exception occurred while iterating over the results of a query for context type 'NorthwindApp.Data.Context.NorthwindContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method74(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlBuffer.ThrowIfNull()
   at Microsoft.Data.SqlClient.SqlBuffer.get_String()
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method74(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-07-30 10:05:45 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:05:45 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 77ms reading results.
[2025-07-30 10:06:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:06:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:06:20 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:06:20 DBG] Created DbCommand for 'ExecuteReader' (124ms).
[2025-07-30 10:06:20 DBG] Created DbCommand for 'ExecuteReader' (124ms).
[2025-07-30 10:06:20 DBG] Created DbCommand for 'ExecuteReader' (124ms).
[2025-07-30 10:06:20 DBG] Initialized DbCommand for 'ExecuteReader' (134ms).
[2025-07-30 10:06:20 DBG] Initialized DbCommand for 'ExecuteReader' (134ms).
[2025-07-30 10:06:20 DBG] Initialized DbCommand for 'ExecuteReader' (135ms).
[2025-07-30 10:06:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 10:06:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 10:06:20 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 10:06:21 INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 10:06:21 INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 10:06:21 INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 10:06:21 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:06:21 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:06:21 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:06:21 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 54ms reading results.
[2025-07-30 10:06:21 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 51ms reading results.
[2025-07-30 10:06:21 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 53ms reading results.
[2025-07-30 10:06:21 INF] HTTP GET /api/Supplier/list responded 200 in 1426.5612 ms
[2025-07-30 10:06:21 INF] HTTP GET /api/Category/list responded 200 in 1426.6025 ms
[2025-07-30 10:06:21 INF] HTTP GET /api/Product/list responded 200 in 1434.8144 ms
[2025-07-30 10:06:22 INF] HTTP GET /api/Category/list responded 200 in 38.8951 ms
[2025-07-30 10:06:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:06:24 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 10:06:24 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 10:06:24 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CustomerID], [c].[Address], [c].[City], [c].[CompanyName], [c].[ContactName], [c].[ContactTitle], [c].[Country], [c].[Fax], [c].[Phone], [c].[PostalCode], [c].[Region]
FROM [Customers] AS [c]
[2025-07-30 10:06:24 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CustomerID], [c].[Address], [c].[City], [c].[CompanyName], [c].[ContactName], [c].[ContactTitle], [c].[Country], [c].[Fax], [c].[Phone], [c].[PostalCode], [c].[Region]
FROM [Customers] AS [c]
[2025-07-30 10:06:24 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:06:24 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 26ms reading results.
[2025-07-30 10:06:24 INF] HTTP GET /api/Customer/list responded 200 in 78.7458 ms
[2025-07-30 10:06:25 INF] HTTP GET /api/Supplier/list responded 200 in 1.0862 ms
[2025-07-30 10:06:26 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:06:26 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 10:06:26 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 10:06:26 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EmployeeId], [e].[BirthDate], [e].[City], [e].[Country], [e].[FirstName], [e].[LastName], [e].[Title]
FROM [Employees] AS [e]
[2025-07-30 10:06:26 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EmployeeId], [e].[BirthDate], [e].[City], [e].[Country], [e].[FirstName], [e].[LastName], [e].[Title]
FROM [Employees] AS [e]
[2025-07-30 10:06:26 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:06:26 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 15ms reading results.
[2025-07-30 10:06:26 INF] HTTP GET /api/Employee/list responded 200 in 60.4647 ms
[2025-07-30 10:06:26 INF] HTTP GET /api/Employee/list responded 200 in 1.0821 ms
[2025-07-30 10:06:28 INF] HTTP GET /api/Customer/list responded 200 in 1.4164 ms
[2025-07-30 10:06:28 INF] HTTP GET /api/Employee/list responded 200 in 2.9799 ms
[2025-07-30 10:06:28 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:06:28 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 10:06:28 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 10:06:28 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 10:06:28 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 10:06:28 ERR] An exception occurred while iterating over the results of a query for context type 'NorthwindApp.Data.Context.NorthwindContext'.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method364(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method364(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
[2025-07-30 10:06:28 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:06:28 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 61ms reading results.
[2025-07-30 10:09:38 ERR] Global hata yakalandı.
System.Data.SqlTypes.SqlNullValueException: Data is Null. This method or property cannot be called on Null values.
   at Microsoft.Data.SqlClient.SqlDataReader.GetString(Int32 i)
   at lambda_method364(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NorthwindApp.Data.Repositories.OrderRepository.GetAllAsync(Expression`1 filter) in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.Data\Repositories\OrderRepository.cs:line 19
   at NorthwindApp.Business.Services.Concrete.OrderService.GetAllAsync() in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.Business\Services\Concrete\OrderService.cs:line 44
   at NorthwindApp.API.Controllers.OrderController.GetAll() in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.API\Controllers\OrderController.cs:line 21
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at NorthwindApp.API.Middleware.ValidationExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.API\Middleware\ValidationExceptionMiddleware.cs:line 22
   at GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.API\Middleware\GlobalExceptionMiddleware.cs:line 19
[2025-07-30 10:09:38 ERR] HTTP GET /api/Order/list responded 500 in 189911.7208 ms
[2025-07-30 10:09:45 INF] HTTP GET /api/Employee/list responded 200 in 1.4361 ms
[2025-07-30 10:09:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 10:09:45 INF] HTTP GET /api/Customer/list responded 200 in 39.5749 ms
[2025-07-30 10:09:45 DBG] Created DbCommand for 'ExecuteReader' (10ms).
[2025-07-30 10:09:45 DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
[2025-07-30 10:09:45 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 10:09:45 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 10:09:45 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 10:09:45 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 7ms reading results.
[2025-07-30 10:09:46 INF] HTTP GET /api/Order/list responded 200 in 82.3249 ms
[2025-07-30 10:10:15 INF] HTTP OPTIONS /api/Order responded 204 in 31.9654 ms
[2025-07-30 10:10:15 INF] HTTP POST /api/Order responded 400 in 47.3709 ms
[2025-07-30 12:37:50 INF] HTTP GET /api/Employee/list responded 200 in 123.2159 ms
[2025-07-30 12:37:50 INF] HTTP GET /api/Customer/list responded 200 in 62.4500 ms
[2025-07-30 12:37:50 INF] HTTP GET /api/Order/list responded 200 in 153.8449 ms
[2025-07-30 12:38:15 INF] HTTP GET /api/Employee/list responded 200 in 62.2111 ms
[2025-07-30 12:38:15 INF] HTTP GET /api/Customer/list responded 200 in 34.3313 ms
[2025-07-30 12:38:15 INF] HTTP GET /api/Order/list responded 200 in 100.0163 ms
[2025-07-30 12:40:24 INF] HTTP GET /api/Category/list responded 200 in 34.1039 ms
[2025-07-30 12:40:26 INF] HTTP OPTIONS /api/Category/12 responded 204 in 0.4841 ms
[2025-07-30 12:40:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:40:27 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 12:40:27 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-07-30 12:40:27 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 12:40:27 INF] Executed DbCommand (44ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 12:40:27 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:40:27 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 3ms reading results.
[2025-07-30 12:40:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:40:27 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:40:27 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 12:40:27 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 12:40:27 INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 12:40:27 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:40:27 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 9ms reading results.
[2025-07-30 12:40:27 ERR] An exception occurred in the database while saving changes for context type 'NorthwindApp.Data.Context.NorthwindContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f2fb3817-726c-4d13-aff2-24357a7c82b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f2fb3817-726c-4d13-aff2-24357a7c82b0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-07-30 12:40:48 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:40:48 DBG] Created DbCommand for 'ExecuteReader' (98ms).
[2025-07-30 12:40:48 DBG] Initialized DbCommand for 'ExecuteReader' (107ms).
[2025-07-30 12:40:48 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 12:40:48 INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 12:40:48 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:40:48 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 50ms reading results.
[2025-07-30 12:40:48 INF] HTTP GET /api/Category/list responded 200 in 1334.2870 ms
[2025-07-30 12:42:00 INF] HTTP GET /api/Category/list responded 200 in 56.7375 ms
[2025-07-30 12:42:00 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:42:00 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 12:42:00 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 12:42:00 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 12:42:00 INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 12:42:00 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:42:00 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 16ms reading results.
[2025-07-30 12:42:00 INF] HTTP GET /api/Supplier/list responded 200 in 179.5483 ms
[2025-07-30 12:42:00 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:42:00 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:42:00 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 12:42:00 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:42:00 INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:42:00 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:42:00 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 21ms reading results.
[2025-07-30 12:42:00 INF] HTTP GET /api/Product/list responded 200 in 272.9828 ms
[2025-07-30 12:42:03 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:42:03 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:42:03 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-07-30 12:42:03 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:42:03 INF] Executed DbCommand (21ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:42:03 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:42:03 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 3ms reading results.
[2025-07-30 12:42:03 INF] HTTP GET /api/Product/1 responded 200 in 91.2295 ms
[2025-07-30 12:42:05 INF] HTTP OPTIONS /api/Product responded 204 in 1.0031 ms
[2025-07-30 12:42:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:42:05 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 12:42:05 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 12:42:05 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:42:05 INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:42:05 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:42:05 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 12:42:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:42:05 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:42:05 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-07-30 12:42:05 DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:42:05 INF] Executed DbCommand (16ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:42:05 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:42:05 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 6ms reading results.
[2025-07-30 12:42:05 INF] HTTP PUT /api/Product responded 200 in 175.9494 ms
[2025-07-30 12:42:05 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:42:05 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 12:42:05 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 12:42:05 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:42:05 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:42:05 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:42:05 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 3ms reading results.
[2025-07-30 12:42:05 INF] HTTP GET /api/Product/list responded 200 in 26.2141 ms
[2025-07-30 12:42:10 INF] HTTP OPTIONS /api/Product/83 responded 204 in 0.0994 ms
[2025-07-30 12:42:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:42:10 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 12:42:10 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:42:10 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:42:10 INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:42:10 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:42:10 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 12:42:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:42:10 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 12:42:10 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:42:10 DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:42:10 INF] Executed DbCommand (4ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:42:10 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:42:10 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 12:42:10 INF] HTTP DELETE /api/Product/83 responded 200 in 41.3034 ms
[2025-07-30 12:42:10 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:42:10 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 12:42:10 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 12:42:10 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:42:10 INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:42:10 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:42:10 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 4ms reading results.
[2025-07-30 12:42:10 INF] HTTP GET /api/Product/list responded 200 in 25.0338 ms
[2025-07-30 12:42:30 INF] HTTP GET /api/Category/list responded 200 in 2.4508 ms
[2025-07-30 12:43:19 INF] HTTP OPTIONS /api/Category responded 204 in 0.1436 ms
[2025-07-30 12:43:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:43:19 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:43:19 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 12:43:19 DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName], [Description])
OUTPUT INSERTED.[CategoryId]
VALUES (@p0, @p1);
[2025-07-30 12:43:19 INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([CategoryName], [Description])
OUTPUT INSERTED.[CategoryId]
VALUES (@p0, @p1);
[2025-07-30 12:43:19 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:43:19 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 12ms reading results.
[2025-07-30 12:43:19 INF] HTTP POST /api/Category responded 200 in 86.0985 ms
[2025-07-30 12:43:19 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:43:19 DBG] Created DbCommand for 'ExecuteReader' (14ms).
[2025-07-30 12:43:19 DBG] Initialized DbCommand for 'ExecuteReader' (17ms).
[2025-07-30 12:43:19 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 12:43:19 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 12:43:19 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:43:19 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 12:43:19 INF] HTTP GET /api/Category/list responded 200 in 35.1960 ms
[2025-07-30 12:43:27 INF] HTTP OPTIONS /api/Category/12 responded 204 in 0.1946 ms
[2025-07-30 12:43:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:43:27 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 12:43:27 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 12:43:27 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 12:43:27 INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 12:43:27 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:43:27 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 12:43:27 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:43:27 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 12:43:27 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:43:27 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 12:43:27 INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 12:43:27 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:43:27 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 9ms reading results.
[2025-07-30 12:43:27 ERR] An exception occurred in the database while saving changes for context type 'NorthwindApp.Data.Context.NorthwindContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9f871e4e-0901-4e88-a6cc-0a5905154344
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9f871e4e-0901-4e88-a6cc-0a5905154344
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-07-30 12:45:06 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:45:06 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:45:06 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:45:06 DBG] Created DbCommand for 'ExecuteReader' (93ms).
[2025-07-30 12:45:06 DBG] Created DbCommand for 'ExecuteReader' (90ms).
[2025-07-30 12:45:06 DBG] Created DbCommand for 'ExecuteReader' (93ms).
[2025-07-30 12:45:06 DBG] Initialized DbCommand for 'ExecuteReader' (99ms).
[2025-07-30 12:45:06 DBG] Initialized DbCommand for 'ExecuteReader' (102ms).
[2025-07-30 12:45:06 DBG] Initialized DbCommand for 'ExecuteReader' (103ms).
[2025-07-30 12:45:06 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:45:06 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 12:45:06 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 12:45:06 INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:45:06 INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 12:45:06 INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 12:45:06 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:45:06 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:45:06 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:45:06 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 51ms reading results.
[2025-07-30 12:45:06 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 53ms reading results.
[2025-07-30 12:45:06 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 50ms reading results.
[2025-07-30 12:45:06 INF] HTTP GET /api/Category/list responded 200 in 1523.1488 ms
[2025-07-30 12:45:06 INF] HTTP GET /api/Supplier/list responded 200 in 1523.1358 ms
[2025-07-30 12:45:06 INF] HTTP GET /api/Product/list responded 200 in 1527.3295 ms
[2025-07-30 12:46:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:46:31 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 12:46:31 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-07-30 12:46:31 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:46:31 INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:46:31 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:46:31 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 4ms reading results.
[2025-07-30 12:46:31 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:46:31 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 12:46:31 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-07-30 12:46:31 DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:46:31 INF] Executed DbCommand (12ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:46:31 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:46:31 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 7ms reading results.
[2025-07-30 12:46:31 INF] HTTP DELETE /api/Product/83 responded 200 in 307.1529 ms
[2025-07-30 12:50:29 INF] HTTP GET /api/Supplier/list responded 200 in 39.6778 ms
[2025-07-30 12:50:29 INF] HTTP GET /api/Category/list responded 200 in 40.0911 ms
[2025-07-30 12:50:29 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:50:29 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-07-30 12:50:29 DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
[2025-07-30 12:50:29 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:50:29 INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 12:50:29 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:50:29 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 6ms reading results.
[2025-07-30 12:50:29 INF] HTTP GET /api/Product/list responded 200 in 117.0526 ms
[2025-07-30 12:50:38 INF] HTTP GET /api/Category/list responded 200 in 2.4287 ms
[2025-07-30 12:50:38 INF] HTTP GET /api/Supplier/list responded 200 in 2.3636 ms
[2025-07-30 12:50:38 INF] HTTP GET /api/Product/list responded 200 in 2.8862 ms
[2025-07-30 12:50:44 INF] HTTP OPTIONS /api/Product/83 responded 204 in 3.5203 ms
[2025-07-30 12:50:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:50:44 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:50:44 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-07-30 12:50:44 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:50:44 INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:50:44 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:50:44 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 4ms reading results.
[2025-07-30 12:50:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:50:44 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:50:44 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-07-30 12:50:44 DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:50:44 INF] Executed DbCommand (16ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:50:44 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:50:44 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 4ms reading results.
[2025-07-30 12:50:44 INF] HTTP DELETE /api/Product/83 responded 200 in 96.4537 ms
[2025-07-30 12:50:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:50:44 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:50:44 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-07-30 12:50:44 DBG] Executing DbCommand [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 12:50:44 INF] Executed DbCommand (12ms) [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 12:50:44 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:50:44 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 5ms reading results.
[2025-07-30 12:50:44 INF] HTTP GET /api/Product/list responded 200 in 64.3702 ms
[2025-07-30 12:51:02 INF] HTTP OPTIONS /api/Product/82 responded 204 in 0.2246 ms
[2025-07-30 12:51:02 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:51:02 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 12:51:02 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-07-30 12:51:02 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:51:02 INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 12:51:02 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:51:02 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 4ms reading results.
[2025-07-30 12:51:02 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:51:02 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 12:51:02 DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
[2025-07-30 12:51:02 DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:51:02 INF] Executed DbCommand (9ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 12:51:02 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:51:02 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 5ms reading results.
[2025-07-30 12:51:02 INF] HTTP DELETE /api/Product/82 responded 200 in 84.8167 ms
[2025-07-30 12:51:02 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 12:51:02 DBG] Created DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 12:51:02 DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
[2025-07-30 12:51:02 DBG] Executing DbCommand [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 12:51:02 INF] Executed DbCommand (8ms) [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 12:51:02 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 12:51:02 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 5ms reading results.
[2025-07-30 12:51:02 INF] HTTP GET /api/Product/list responded 200 in 43.1194 ms
[2025-07-30 13:06:50 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 13:06:50 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 13:06:50 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 13:06:50 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 13:06:50 INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 13:06:50 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 13:06:50 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 13:06:50 INF] HTTP GET /api/Product/2 responded 200 in 92.6946 ms
[2025-07-30 13:06:52 INF] HTTP OPTIONS /api/Product responded 204 in 0.2340 ms
[2025-07-30 13:06:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 13:06:52 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 13:06:52 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 13:06:52 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 13:06:52 INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 13:06:52 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 13:06:52 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 1ms reading results.
[2025-07-30 13:06:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 13:06:52 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 13:06:52 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 13:06:52 DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 13:06:52 INF] Executed DbCommand (9ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 13:06:52 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 13:06:52 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 1ms reading results.
[2025-07-30 13:06:52 INF] HTTP PUT /api/Product responded 200 in 77.3242 ms
[2025-07-30 13:06:52 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 13:06:52 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 13:06:52 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 13:06:52 DBG] Executing DbCommand [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 13:06:52 INF] Executed DbCommand (5ms) [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 13:06:52 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 13:06:52 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 1ms reading results.
[2025-07-30 13:06:52 INF] HTTP GET /api/Product/list responded 200 in 19.3848 ms
[2025-07-30 15:58:06 INF] HTTP GET /api/Category/list responded 200 in 3.9414 ms
[2025-07-30 15:58:11 INF] HTTP OPTIONS /api/Category/12 responded 204 in 0.2151 ms
[2025-07-30 15:58:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 15:58:11 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 15:58:11 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 15:58:11 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 15:58:11 INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 15:58:11 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 15:58:11 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 15:58:11 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 15:58:11 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 15:58:11 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 15:58:11 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 15:58:11 INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 15:58:11 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 15:58:11 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 11ms reading results.
[2025-07-30 15:58:11 ERR] An exception occurred in the database while saving changes for context type 'NorthwindApp.Data.Context.NorthwindContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9940d038-996e-4358-b111-beb908aca045
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9940d038-996e-4358-b111-beb908aca045
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-07-30 16:00:35 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:00:35 DBG] Created DbCommand for 'ExecuteReader' (73ms).
[2025-07-30 16:00:35 DBG] Initialized DbCommand for 'ExecuteReader' (86ms).
[2025-07-30 16:00:35 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 16:00:35 INF] Executed DbCommand (59ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 16:00:36 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:00:36 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 55ms reading results.
[2025-07-30 16:00:36 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:00:36 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 16:00:36 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 16:00:36 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 16:00:36 INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 16:00:36 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:00:36 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 9ms reading results.
[2025-07-30 16:00:36 ERR] An exception occurred in the database while saving changes for context type 'NorthwindApp.Data.Context.NorthwindContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:554e59c5-625f-462a-91c9-a29c0ea503f1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:554e59c5-625f-462a-91c9-a29c0ea503f1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-07-30 16:08:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:08:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:08:24 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:08:24 DBG] Created DbCommand for 'ExecuteReader' (88ms).
[2025-07-30 16:08:24 DBG] Created DbCommand for 'ExecuteReader' (88ms).
[2025-07-30 16:08:24 DBG] Created DbCommand for 'ExecuteReader' (88ms).
[2025-07-30 16:08:24 DBG] Initialized DbCommand for 'ExecuteReader' (99ms).
[2025-07-30 16:08:24 DBG] Initialized DbCommand for 'ExecuteReader' (99ms).
[2025-07-30 16:08:24 DBG] Initialized DbCommand for 'ExecuteReader' (100ms).
[2025-07-30 16:08:24 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 16:08:24 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 16:08:24 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 16:08:24 INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 16:08:24 INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 16:08:24 INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 16:08:24 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:08:24 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:08:24 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:08:24 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 58ms reading results.
[2025-07-30 16:08:24 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 57ms reading results.
[2025-07-30 16:08:24 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 56ms reading results.
[2025-07-30 16:08:24 INF] HTTP GET /api/Supplier/list responded 200 in 1427.5711 ms
[2025-07-30 16:08:24 INF] HTTP GET /api/Category/list responded 200 in 1429.8433 ms
[2025-07-30 16:08:24 INF] HTTP GET /api/Product/list responded 200 in 1438.5538 ms
[2025-07-30 16:08:44 INF] HTTP OPTIONS /api/Product/86 responded 204 in 1.5471 ms
[2025-07-30 16:08:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:08:44 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:08:44 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-07-30 16:08:44 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 16:08:44 INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 16:08:44 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:08:44 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 3ms reading results.
[2025-07-30 16:08:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:08:44 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 16:08:44 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 16:08:44 DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 16:08:44 INF] Executed DbCommand (9ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 16:08:44 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:08:44 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 5ms reading results.
[2025-07-30 16:08:44 INF] HTTP DELETE /api/Product/86 responded 200 in 229.2616 ms
[2025-07-30 16:08:44 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:08:44 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:08:44 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 16:08:44 DBG] Executing DbCommand [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 16:08:44 INF] Executed DbCommand (6ms) [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 16:08:44 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:08:44 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 3ms reading results.
[2025-07-30 16:08:44 INF] HTTP GET /api/Product/list responded 200 in 49.7157 ms
[2025-07-30 16:08:47 INF] HTTP GET /api/Category/list responded 200 in 2.4357 ms
[2025-07-30 16:08:49 INF] HTTP OPTIONS /api/Category/12 responded 204 in 0.2336 ms
[2025-07-30 16:08:49 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:08:49 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:08:49 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 16:08:49 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 16:08:49 INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 16:08:49 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:08:49 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 16:08:49 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:08:49 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:08:49 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 16:08:49 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 16:08:49 INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 16:08:49 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:08:49 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 7ms reading results.
[2025-07-30 16:08:49 ERR] An exception occurred in the database while saving changes for context type 'NorthwindApp.Data.Context.NorthwindContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:876ab8c3-2783-427d-b2b4-30549e54840f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:876ab8c3-2783-427d-b2b4-30549e54840f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-07-30 16:09:24 ERR] Global hata yakalandı.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Categories". The conflict occurred in database "Northwind", table "dbo.Products", column 'CategoryID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:876ab8c3-2783-427d-b2b4-30549e54840f
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at NorthwindApp.Data.Repositories.Repository`1.SaveChangesAsync() in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.Data\Repositories\Repository.cs:line 45
   at NorthwindApp.Business.Services.Concrete.CategoryService.DeleteAsync(Int32 id) in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.Business\Services\Concrete\CategoryService.cs:line 121
   at NorthwindApp.API.Controllers.CategoryController.Delete(Int32 id) in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.API\Controllers\CategoryController.cs:line 50
   at lambda_method285(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at NorthwindApp.API.Middleware.ValidationExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.API\Middleware\ValidationExceptionMiddleware.cs:line 22
   at GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\MAREK HAMSIK\source\repos\NorthwindApp\NorthwindApp.API\Middleware\GlobalExceptionMiddleware.cs:line 19
[2025-07-30 16:09:24 ERR] HTTP DELETE /api/Category/12 responded 500 in 35737.6061 ms
[2025-07-30 16:10:55 INF] HTTP OPTIONS /api/Category/12 responded 204 in 67.9040 ms
[2025-07-30 16:10:55 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:10:55 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:10:55 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 16:10:55 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 16:10:55 INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
WHERE [c].[CategoryId] = @__p_0
[2025-07-30 16:10:55 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:10:55 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 1ms reading results.
[2025-07-30 16:10:55 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:10:55 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 16:10:55 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 16:10:55 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 16:10:55 INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Categories]
OUTPUT 1
WHERE [CategoryId] = @p0;
[2025-07-30 16:10:55 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:10:55 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 1ms reading results.
[2025-07-30 16:10:55 INF] HTTP DELETE /api/Category/12 responded 200 in 53.3010 ms
[2025-07-30 16:10:55 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:10:55 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:10:55 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 16:10:55 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 16:10:55 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CategoryId], [c].[CategoryName], [c].[Description]
FROM [Categories] AS [c]
[2025-07-30 16:10:55 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:10:55 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 16:10:55 INF] HTTP GET /api/Category/list responded 200 in 23.5100 ms
[2025-07-30 16:10:58 INF] HTTP GET /api/Supplier/list responded 200 in 29.3208 ms
[2025-07-30 16:10:58 INF] HTTP GET /api/Category/list responded 200 in 29.5382 ms
[2025-07-30 16:10:58 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:10:58 DBG] Created DbCommand for 'ExecuteReader' (7ms).
[2025-07-30 16:10:58 DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
[2025-07-30 16:10:58 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 16:10:58 INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
[2025-07-30 16:10:58 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:10:58 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 3ms reading results.
[2025-07-30 16:10:58 INF] HTTP GET /api/Product/list responded 200 in 89.6840 ms
[2025-07-30 16:11:16 INF] HTTP GET /api/Category/list responded 200 in 1.0553 ms
[2025-07-30 16:13:42 INF] HTTP GET /api/Category/list responded 200 in 1.8863 ms
[2025-07-30 16:16:06 INF] HTTP GET /api/Category/list responded 200 in 96.1014 ms
[2025-07-30 16:16:06 INF] HTTP GET /api/Product/list responded 200 in 96.7348 ms
[2025-07-30 16:16:06 INF] HTTP GET /api/Supplier/list responded 200 in 70.9847 ms
[2025-07-30 16:16:07 INF] HTTP GET /api/Category/list responded 200 in 1.3140 ms
[2025-07-30 16:16:08 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:16:08 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:16:08 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 16:16:08 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CustomerID], [c].[Address], [c].[City], [c].[CompanyName], [c].[ContactName], [c].[ContactTitle], [c].[Country], [c].[Fax], [c].[Phone], [c].[PostalCode], [c].[Region]
FROM [Customers] AS [c]
[2025-07-30 16:16:08 INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CustomerID], [c].[Address], [c].[City], [c].[CompanyName], [c].[ContactName], [c].[ContactTitle], [c].[Country], [c].[Fax], [c].[Phone], [c].[PostalCode], [c].[Region]
FROM [Customers] AS [c]
[2025-07-30 16:16:08 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:16:08 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 22ms reading results.
[2025-07-30 16:16:08 INF] HTTP GET /api/Customer/list responded 200 in 100.3007 ms
[2025-07-30 16:16:08 INF] HTTP GET /api/Supplier/list responded 200 in 0.7253 ms
[2025-07-30 16:16:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:16:09 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:16:09 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 16:16:09 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EmployeeId], [e].[BirthDate], [e].[City], [e].[Country], [e].[FirstName], [e].[LastName], [e].[Title]
FROM [Employees] AS [e]
[2025-07-30 16:16:09 INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[EmployeeId], [e].[BirthDate], [e].[City], [e].[Country], [e].[FirstName], [e].[LastName], [e].[Title]
FROM [Employees] AS [e]
[2025-07-30 16:16:09 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:16:09 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 13ms reading results.
[2025-07-30 16:16:09 INF] HTTP GET /api/Employee/list responded 200 in 57.8293 ms
[2025-07-30 16:16:09 INF] HTTP GET /api/Employee/list responded 200 in 0.8121 ms
[2025-07-30 16:16:09 INF] HTTP GET /api/Customer/list responded 200 in 0.9722 ms
[2025-07-30 16:16:09 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:16:09 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:16:09 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 16:16:09 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 16:16:09 INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderID], [o].[CustomerID], [o].[EmployeeID], [o].[Freight], [o].[OrderDate], [o].[RequiredDate], [o].[ShipAddress], [o].[ShipCity], [o].[ShipCountry], [o].[ShipName], [o].[ShipPostalCode], [o].[ShipRegion], [o].[ShipVia], [o].[ShippedDate]
FROM [Orders] AS [o]
[2025-07-30 16:16:09 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:16:09 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 28ms reading results.
[2025-07-30 16:16:09 INF] HTTP GET /api/Order/list responded 200 in 80.9637 ms
[2025-07-30 16:20:37 INF] HTTP GET /api/Supplier/list responded 200 in 61.3818 ms
[2025-07-30 16:20:37 INF] HTTP GET /api/Product/list responded 200 in 176.4225 ms
[2025-07-30 16:20:37 INF] HTTP GET /api/Category/list responded 200 in 176.0897 ms
[2025-07-30 16:28:25 INF] HTTP GET /api/Supplier/list responded 200 in 5.4506 ms
[2025-07-30 16:28:25 INF] HTTP GET /api/Category/list responded 200 in 67.8674 ms
[2025-07-30 16:28:25 INF] HTTP GET /api/Product/list responded 200 in 67.9738 ms
[2025-07-30 16:28:33 INF] HTTP OPTIONS /api/Product/83 responded 204 in 0.9254 ms
[2025-07-30 16:28:33 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:28:33 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:28:33 DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
[2025-07-30 16:28:33 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 16:28:33 INF] Executed DbCommand (23ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[ProductID] = @__p_0
[2025-07-30 16:28:33 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:28:33 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 16:28:33 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:28:33 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:28:33 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 16:28:33 DBG] Executing DbCommand [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 16:28:33 INF] Executed DbCommand (24ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (DbType = Boolean), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Int16), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Int16), @p8='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Products] SET [CategoryId] = @p0, [Discontinued] = @p1, [ProductName] = @p2, [QuantityPerUnit] = @p3, [ReorderLevel] = @p4, [SupplierId] = @p5, [UnitPrice] = @p6, [UnitsInStock] = @p7, [UnitsOnOrder] = @p8
OUTPUT 1
WHERE [ProductID] = @p9;
[2025-07-30 16:28:33 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:28:33 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 16:28:33 INF] HTTP DELETE /api/Product/83 responded 200 in 135.5828 ms
[2025-07-30 16:28:33 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:28:33 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 16:28:33 DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
[2025-07-30 16:28:33 DBG] Executing DbCommand [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 16:28:33 INF] Executed DbCommand (8ms) [Parameters=[@__filter_Discontinued_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[ProductID], [p].[CategoryId], [p].[Discontinued], [p].[ProductName], [p].[QuantityPerUnit], [p].[ReorderLevel], [p].[SupplierId], [p].[UnitPrice], [p].[UnitsInStock], [p].[UnitsOnOrder]
FROM [Products] AS [p]
WHERE [p].[Discontinued] = @__filter_Discontinued_0
[2025-07-30 16:28:33 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:28:33 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 16:28:33 INF] HTTP GET /api/Product/list responded 200 in 28.2871 ms
[2025-07-30 16:29:04 INF] HTTP GET /api/Supplier/list responded 200 in 1.0870 ms
[2025-07-30 16:29:15 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:29:15 DBG] Created DbCommand for 'ExecuteReader' (1ms).
[2025-07-30 16:29:15 DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 16:29:15 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
WHERE [s].[SupplierId] = @__p_0
[2025-07-30 16:29:15 INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
WHERE [s].[SupplierId] = @__p_0
[2025-07-30 16:29:15 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:29:15 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 16:29:15 INF] HTTP GET /api/Supplier/5 responded 200 in 43.8071 ms
[2025-07-30 16:29:16 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:29:16 DBG] Created DbCommand for 'ExecuteReader' (3ms).
[2025-07-30 16:29:16 DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
[2025-07-30 16:29:16 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
WHERE [s].[SupplierId] = @__p_0
[2025-07-30 16:29:16 INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
WHERE [s].[SupplierId] = @__p_0
[2025-07-30 16:29:16 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:29:16 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 2ms reading results.
[2025-07-30 16:29:16 INF] HTTP GET /api/Supplier/5 responded 200 in 25.1532 ms
[2025-07-30 16:29:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:29:45 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:29:45 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 16:29:45 DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
WHERE [s].[SupplierId] = @__p_0
[2025-07-30 16:29:45 INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
WHERE [s].[SupplierId] = @__p_0
[2025-07-30 16:29:45 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:29:45 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 5ms reading results.
[2025-07-30 16:29:45 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:29:45 DBG] Created DbCommand for 'ExecuteReader' (2ms).
[2025-07-30 16:29:45 DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
[2025-07-30 16:29:45 DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Suppliers]
OUTPUT 1
WHERE [SupplierId] = @p0;
[2025-07-30 16:29:45 INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Suppliers]
OUTPUT 1
WHERE [SupplierId] = @p0;
[2025-07-30 16:29:45 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:29:45 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 7ms reading results.
[2025-07-30 16:29:45 ERR] An exception occurred in the database while saving changes for context type 'NorthwindApp.Data.Context.NorthwindContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Suppliers". The conflict occurred in database "Northwind", table "dbo.Products", column 'SupplierID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4dff7764-e7d6-4c4a-8431-4b375b86c28d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_Products_Suppliers". The conflict occurred in database "Northwind", table "dbo.Products", column 'SupplierID'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4dff7764-e7d6-4c4a-8431-4b375b86c28d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-07-30 16:30:34 DBG] Creating DbCommand for 'ExecuteReader'.
[2025-07-30 16:30:34 DBG] Created DbCommand for 'ExecuteReader' (86ms).
[2025-07-30 16:30:34 DBG] Initialized DbCommand for 'ExecuteReader' (96ms).
[2025-07-30 16:30:34 DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 16:30:34 INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SupplierId], [s].[Address], [s].[City], [s].[CompanyName], [s].[ContactName], [s].[ContactTitle], [s].[Country], [s].[Phone], [s].[PostalCode], [s].[Region]
FROM [Suppliers] AS [s]
[2025-07-30 16:30:34 DBG] Closing data reader to 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS'.
[2025-07-30 16:30:34 DBG] A data reader for 'Northwind' on server 'MAREK-HAMSIK\SQLEXPRESS' is being disposed after spending 61ms reading results.
[2025-07-30 16:30:34 INF] HTTP GET /api/Supplier/list responded 200 in 1681.3086 ms
